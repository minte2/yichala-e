<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create New Course - Yichalal</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="bg-light">
    <!-- (Copy your standard Navbar HTML here, with the user dropdown) -->
    <nav
      class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top"
    >
      ...
    </nav>

    <!-- Main Content Area -->
    <main class="container my-5 pt-4">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="d-flex align-items-center mb-4">
            <a href="dashboard.html" class="btn btn-outline-secondary me-3"
              ><i class="bi bi-arrow-left"></i> Back</a
            >
            <h1 class="h2 mb-0">Create Your New Course</h1>
          </div>

          <div class="card shadow-sm">
            <div class="card-header">
              <!-- Tab Navigation -->
              <ul class="nav nav-tabs card-header-tabs">
                <li class="nav-item">
                  <a
                    class="nav-link active"
                    data-bs-toggle="tab"
                    href="#course-info-pane"
                    >1. Course Info</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    data-bs-toggle="tab"
                    href="#curriculum-pane"
                    >2. Curriculum</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-bs-toggle="tab" href="#media-pane"
                    >3. Media</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-bs-toggle="tab" href="#pricing-pane"
                    >4. Pricing</a
                  >
                </li>
              </ul>
            </div>
            <div class="card-body p-4">
              <form id="create-course-form">
                <div class="tab-content">
                  <!-- Pane 1: Course Info -->
                  <div class="tab-pane fade show active" id="course-info-pane">
                    <h4 class="mb-4">Course Landing Page</h4>
                    <div class="mb-3">
                      <label class="form-label">Course Title</label
                      ><input
                        type="text"
                        class="form-control form-control-lg"
                        placeholder="e.g., The Complete Guide to Digital Marketing"
                      />
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Short Description</label
                      ><textarea
                        class="form-control"
                        rows="3"
                        placeholder="A brief summary of your course."
                      ></textarea>
                    </div>
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label class="form-label">Category</label
                        ><select class="form-select">
                          <option>Tech</option>
                          <option>Business</option>
                          <option>Creative</option>
                        </select>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label class="form-label">Level</label
                        ><select class="form-select">
                          <option>Beginner</option>
                          <option>Intermediate</option>
                          <option>Advanced</option>
                        </select>
                      </div>
                    </div>
                  </div>

                  <!-- Pane 2: Curriculum -->
                  <div class="tab-pane fade" id="curriculum-pane">
                    <h4 class="mb-4">Build Your Curriculum</h4>
                    <div id="curriculum-builder">
                      <!-- Modules will be added here by JS -->
                    </div>
                    <button
                      type="button"
                      class="btn btn-outline-primary mt-3"
                      id="add-module-btn"
                    >
                      <i class="bi bi-plus-circle me-2"></i>Add Module
                    </button>
                  </div>

                  <!-- Pane 3: Media -->
                  <div class="tab-pane fade" id="media-pane">
                    <h4 class="mb-4">Course Media</h4>
                    <div class="mb-4">
                      <label class="form-label">Course Thumbnail Image</label
                      ><input
                        class="form-control"
                        type="file"
                        accept="image/*"
                      />
                    </div>
                    <div class="mb-4">
                      <label class="form-label"
                        >Promotional Video (Optional)</label
                      ><input
                        class="form-control"
                        type="file"
                        accept="video/*"
                      />
                    </div>
                    <div class="mb-4">
                      <label class="form-label"
                        >Downloadable Resources (Zip file)</label
                      ><input
                        class="form-control"
                        type="file"
                        accept=".zip,.rar,.7zip"
                      />
                    </div>
                  </div>

                  <!-- Pane 4: Pricing -->
                  <div class="tab-pane fade" id="pricing-pane">
                    <h4 class="mb-4">Set Your Price</h4>
                    <div class="row">
                      <div class="col-md-6">
                        <label class="form-label">Pricing Tier</label>
                        <select class="form-select" id="pricing-select">
                          <option value="free">Free</option>
                          <option value="paid" selected>Paid</option>
                        </select>
                      </div>
                      <div class="col-md-6" id="price-input-container">
                        <label class="form-label">Price</label>
                        <div class="input-group">
                          <span class="input-group-text">ETB</span>
                          <input
                            type="number"
                            class="form-control"
                            placeholder="e.g., 999"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <hr class="my-4" />
                <div class="d-flex justify-content-end gap-2">
                  <button type="button" class="btn btn-secondary">
                    Save Draft
                  </button>
                  <button type="submit" class="btn btn-primary btn-lg">
                    Submit for Review
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const curriculumBuilder = document.getElementById("curriculum-builder");
        const addModuleBtn = document.getElementById("add-module-btn");
        let moduleIndex = 0;

        // --- DYNAMIC CURRICULUM LOGIC ---
        function addModule() {
          moduleIndex++;
          const moduleHtml = `
                    <div class="card module-card mb-3">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Module ${moduleIndex}</h5>
                                <button type="button" class="btn-close" aria-label="Close"></button>
                            </div>
                            <hr>
                            <div class="mb-3">
                                <label class="form-label small">Module Title</label>
                                <input type="text" class="form-control" placeholder="e.g., Introduction to the Course">
                            </div>
                            <h6>Lessons</h6>
                            <div class="lessons-container mb-2">
                                <!-- Lessons for this module will be added here -->
                            </div>
                            <button type="button" class="btn btn-sm btn-outline-secondary add-lesson-btn">
                                <i class="bi bi-plus"></i> Add Lesson
                            </button>
                        </div>
                    </div>`;
          curriculumBuilder.insertAdjacentHTML("beforeend", moduleHtml);
        }

        // Event Delegation for dynamically added buttons
        curriculumBuilder.addEventListener("click", (e) => {
          // Add Lesson
          if (e.target.classList.contains("add-lesson-btn")) {
            const lessonsContainer = e.target.previousElementSibling;
            const lessonHtml = `
                        <div class="input-group input-group-sm mb-2">
                            <span class="input-group-text"><i class="bi bi-play-circle"></i></span>
                            <input type="text" class="form-control" placeholder="e.g., Welcome and Course Overview">
                            <button class="btn btn-outline-danger" type="button"><i class="bi bi-trash"></i></button>
                        </div>`;
            lessonsContainer.insertAdjacentHTML("beforeend", lessonHtml);
          }

          // Remove Module
          if (e.target.classList.contains("btn-close")) {
            e.target.closest(".module-card").remove();
          }

          // Remove Lesson
          if (e.target.matches(".btn-outline-danger, .btn-outline-danger i")) {
            e.target.closest(".input-group").remove();
          }
        });

        addModuleBtn.addEventListener("click", addModule);
        addModule(); // Start with one module by default

        // --- PRICING LOGIC ---
        const pricingSelect = document.getElementById("pricing-select");
        const priceInputContainer = document.getElementById(
          "price-input-container"
        );

        pricingSelect.addEventListener("change", () => {
          if (pricingSelect.value === "paid") {
            priceInputContainer.style.display = "block";
          } else {
            priceInputContainer.style.display = "none";
          }
        });

        // --- FORM SUBMISSION ---
        document
          .getElementById("create-course-form")
          .addEventListener("submit", (e) => {
            e.preventDefault();
            alert("Course submitted for review! (Prototype)");
            // In a real app, you would gather all form data here, including the dynamic curriculum.
            console.log("Form submitted. Data collection would happen here.");
            window.location.href = "dashboard.html";
          });
      });
    </script>
  </body>
</html>
